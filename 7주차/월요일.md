# 첫 번째 가상절차
1. C -> AS:IDc || Pc || IDv  
2. AS -> C: Ticket  
3. C -> V: IDc || Ticket  
Ticket = E(Kv, [IDc || ADc || IDv])  
C = 클라이언트  
AS = 인증서버  
V = 서버  
IDc = 사용자 c의 식별자  
IDv = 서버 v의 식별자  
Pc = 사용자 C의 패스워드  
ADc = C의 네트워크 주소

## ADc 사용목적
* 티켓을 요청한 워크스테이션에서만 티켓을 사용할 수 있게 함
    - 다음의 경우를 상정해서 방어하기 위함  
        ~~

## 보다 안전한 인증 절차
* 인증문제 해결
* 아직 해결되지 않은 ~~

## 가능한 공격 시나리오
* 티켓을 가로챈 뒤 해당 사용자가 워크스테이션에서 로그오프 할 때까지 대기
* 공격자는 자신의 워크스테이션 주소를 조작해서 공격하는 컴퓨터와 동일 주소 갖도록 조작
* 티켓을 재사용하여 TGS를 속인다.

## 대비책
* 티켓 안에 타임스탬프를 포함
    - 티켓 발행 시점 표기
    - 티켓 유효기간 표시

## 개선된 가상적 절차
* 사용자 로그온 세션마다 한 번
* 서비스 유형마다 한 번
* 서비스 세션마다 한 번

## 버전 4 인증절차
* 첫 번째 시나리오 보다 안전해짐
* 또 다른 두 가지 문제점이 남아 있음
    1. 티켓-승인 티켓의 유효기간 적절 조정 문제
        - 티켓-승인 티켓 유효기간 문제
            * 유효기간 문제
                - 재전송 공격 가능
                - 서비스-승인 티켓의 유효기간도 동일한 위험
            * 티켓 사용자와 티켓 발행 받은 자가 동일 ~~
        - 서비스-승인 티켓 유효기간 문제도 비슷
            * 티켓을 사용하고 있는 사람과 티켓을 발행받은 사람이 동일한 사람임을 증명할 수 있어야함
    2. 서버도 자신을 사용자에게 인증할 필요가 있음

## 더욱 개선된 방법
* A 인증서비스 교환 : 티켓-발행 티켓 취득
* B 티켓-발행 서비스 교환 : 서비스-발행 티켓 취득
* C 클라이언트/서버 인증 교환 : 서비스 취득
